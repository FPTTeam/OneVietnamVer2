@using System.Collections;
@using OneVietnam.BLL
@using OneVietnam.DTL;
@model OneVietnam.Models.CreatePostViewModel

@{
    ViewBag.Title = "CreatePost";
    List<Tag> tagList = ViewData["TagList"] as List<Tag>;
    List<Icon> postTypes = ViewData["PostTypes"] as List<Icon>;    
}

<h2>CreatePost</h2>
<script src="~/Scripts/jquery-1.10.2.js"></script>



@using (Html.BeginForm("CreatePost", "Post", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal" style="height: 500px;">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <table>
            <tr>
                <td>
                    <input id="fileUpload" name="fileUpload" type="file" hidden="" value="" multiple=""/>


                    @*<label id="imgUpload">Tải ảnh lên</label>                                                           
                    <script type="text/javascript">
                        $("#imgUpload").click(function() {
                            $('.ui.modal')
                                .modal('show')
                            ;
                        });
                    </script>
                    <div class="ui modal">
                        <i class="close icon"></i>
                        <div class="header">
                            Tải ảnh lên
                        </div>
                        
                        <div class="actions">
                            <button class="ui primary button">
                                Hoàn tât
                            </button>
                            <button class="ui button">
                                Hủy bỏ
                            </button>
                        </div>
                    </div>*@
                </td>
                <td>
                    <table>
                        <tr>
                            <th colspan="2"><label for="Title">Tiêu đề</label></th>
                            <td>
                                <input id="Title" name="Title" type="text" value="" tabindex="1" />
                                <span class="field-validation-valid text-danger" data-valmsg-for="Title" data-valmsg-replace="true"></span>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2"><label for="PostType">Loại bài đăng</label></th>
                            <td>
                                <div class="ui fluid selection dropdown">
                                    <input type="hidden" id="PostType" name="PostType">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Chọn loại bài đăng</div>
                                    <div class="menu">
                                        @{
                                            if (postTypes != null)
                                            {
                                                foreach (Icon icon in postTypes)
                                                {
                                                    <div class="item" data-value="@icon.IconId">
                                                        <img class="ui mini avatar image" src="@icon.IconImage">
                                                        @icon.IconText
                                                    </div>
                                                }
                                            }
                                        }

                                    </div>
                                </div>                                

                                @*<select data-val="true" data-val-number="The field PostType must be a number." data-val-required="The PostType field is required." id="PostType" name="PostType">
                                    <option value="">Chọn loại bài đăng</option>

                                    @{
                                        if (postTypes != null)
                                        {
                                            foreach (Icon icon in postTypes)
                                            {
                                                <option value="@icon.IconId">@icon.IconText</option>
                                            }
                                        }
                                    }
                                </select>*@
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2"><label for="UserName">Người đăng</label></th>
                            <td>
                                <input disabled="disabled" value="@User.Identity.Name" id="UserName" />
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2"><label for="PostLocation_Address">Địa chỉ của bài đăng</label></th>
                            <td>
                                <input tabindex="3" id="PostLocation_Address" name="PostLocation.Address" type="text" value=""/>                                
                                <span class="field-validation-valid text-danger" data-valmsg-for="PostLocation.Address" data-valmsg-replace="true"></span>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2"><label>Ngày đăng</label></th>
                            <td>
                                <input type="datetime" disabled="disabled" value="@System.DateTime.Now.ToString("yyyy MMMM dd")" />
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2"><label for="Description">Mô tả </label></th>
                            <td>
                                <input tabindex="4" id="Description" name="Description" type="text" value="" />
                                <span class="field-validation-valid text-danger" data-valmsg-for="Description" data-valmsg-replace="true"></span>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="2">
                                <label>Thẻ liên quan</label>
                            </th>
                            <td>
                                <div class="ui fluid multiple search selection dropdown">
                                    <input name="tags" id="tags" type="hidden" value="">
                                    <i class="dropdown icon"></i>
                                    <input class="search" autocomplete="off" tabindex="0"><span class="sizer"></span><div class="default text">Chọn hoặc tạo thẻ mới</div>
                                    <div class="menu transition hidden" tabindex="-1">
                                        
                                        @{
                                            if (tagList != null)
                                            {
                                                foreach (Tag tag in tagList)
                                                {
                                                    <div class="item" data-value="@tag.TagValue">@tag.TagText</div>
                                                }
                                            }
                                        }

                                    </div>

                                </div>

                            </td>

                        </tr>

                        <tr>

                            <th colspan="2"></th>

                            <td><input id="btnCreate" type="submit" tabindex="6" value="Tạo mới" class="btn btn-default" /></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

    </div>

                                            }

<div>
    <p>@Html.ActionLink("Back to List", "Index", "Home")</p>
    <p>@Html.ActionLink("Show all Posts", "ShowPost")</p>
</div>


@using OneVietnam.DTL
@using OneVietnam.Models
@{

    List<Tag> tagList = ViewData["TagList"] as List<Tag>;
    List<Icon> postTypes = ViewData["PostTypes"] as List<Icon>;

}
@*<link href="~/Content/fine-uploader-new.min.css" rel="stylesheet">*@
<script src="~/Scripts/azure.jquery.fine-uploader.min.js"></script>
@*<script type="text/template" id="qq-template">
    <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
            <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
        </div>
        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
            <span class="qq-upload-drop-area-text-selector"></span>
        </div>
        <div class="qq-upload-button-selector qq-upload-button">
            <div>Upload a file</div>
        </div>
        <span class="qq-drop-processing-selector qq-drop-processing">
            <span>Processing dropped files...</span>
            <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
            <li>
                <div class="qq-progress-bar-container-selector">
                    <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                </div>
                <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                <span class="qq-upload-file-selector qq-upload-file"></span>
                <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                <span class="qq-upload-size-selector qq-upload-size"></span>
                <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancel</button>
                <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>
                <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Delete</button>
                <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
            </li>
        </ul>

        <dialog class="qq-alert-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Close</button>
            </div>
        </dialog>

        <dialog class="qq-confirm-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">No</button>
                <button type="button" class="qq-ok-button-selector">Yes</button>
            </div>
        </dialog>

        <dialog class="qq-prompt-dialog-selector">
            <div class="qq-dialog-message-selector"></div>
            <input type="text">
            <div class="qq-dialog-buttons">
                <button type="button" class="qq-cancel-button-selector">Cancel</button>
                <button type="button" class="qq-ok-button-selector">Ok</button>
            </div>
        </dialog>
    </div>
</script>*@

<div class="ui grid">
 
        <div class="two wide column">

            @*    <div class="ui vertical menu right floated">*@
            @*        <div class="item">*@
            @*            <div class="ui input"><input type="text" placeholder="Search...">*@
            @*            </div>*@
            @*        </div>*@
            @*        <div class="item">*@
            @*            Home*@
            @*            <div class="menu">*@
            @*                <a class="active item">Search</a>*@
            @*                @{*@
            @*                    ((PostController)ViewContext.Controller)._CreatePost();*@
            @*                }*@
            @*                <a class="item write"  ><i class="write icon"></i>Write Post</a>*@
            @*                <a class="item">Remove</a>*@
            @*            </div>*@
            @*        </div>*@
            @*        <a class="browse item">*@
            @*            <i class="grid layout icon"></i> Filter*@
            @*        </a>*@
            @**@
            @*        <a class="item">*@
            @*            Messages*@
            @*        </a>*@
            @*        <div class="ui dropdown item">*@
            @*            More*@
            @*            <i class="dropdown icon"></i>*@
            @*            <div class="menu">*@
            @*                <a class="item"><i class="edit icon"></i> Edit Profile</a>*@
            @*                <a class="item"><i class="globe icon"></i> Choose Language</a>*@
            @*                <a class="item"><i class="settings icon"></i> Account AppSettings.Settings</a>*@
            @*            </div>*@
            @*        </div>*@
            @*    </div>*@
          

            <nav>
                <ul class="filter-group">
                    <li><a href="#1" data-filter=".0">Đi đâu?</a></li>
                    <li><a href="#2" data-filter=".4">Ăn gì?</a></li>
                    <li><a href="#3" data-filter=".6">Làm thêm</a></li>
                    <li><a href="#4">Nhận xách tay</a></li>
                </ul>
            </nav>
            <div id="floating-button" class="stamp-button" data-toggle="tooltip" data-original-title="Create">
                <p class="plus"><i class="write icon"></i></p>
                <p class="edits"><i class="remove icon"></i></p>
            </div>

        </div>
    <div class="ten wide column">
        

        
        <div class="grids">
            <div class="stamp stamp1  hides">


                @using (Html.BeginForm("CreatePost", "Post", FormMethod.Post, new {enctype = "multipart/form-data", @class = "ui form"}))
                {

                    <div class="ui segment">
                        @Html.AntiForgeryToken()
                        @*<div id="fine-uploader"></div>*@
                        <div class="field">
                            <div class="ui input  focus">
                                <input id="Title" name="Title" type="text" placeholder="Title...">
                                <span class="field-validation-valid text-danger" data-valmsg-for="Title" data-valmsg-replace="true"></span>
                            </div>

                            @Html.ValidationSummary(true, "", new {@class = "text-danger"})

                        </div>

                        <div class="two fields">

                            <div class="field">

                                <div class="ui  selection dropdown" id="drPostType">
                                    <input type="hidden" id="PostType" name="PostType">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Chọn loại bài đăng</div>
                                    <div class="menu">
                                        @{
                                            if (postTypes != null)
                                            {
                                                foreach (Icon icon in postTypes)
                                                {
                                                    <div class="item" data-value="@icon.IconId">
                                                        @*<img class="ui mini avatar image" src="@icon.IconImage">*@
                                                        @icon.IconText
                                                    </div>
                                                }
                                            }
                                        }

                                    </div>
                                </div>





                            </div>
                            <div class="field">

                                @*<script>
        var uploader = new qq.azure.FineUploader({
            element: document.getElementById('fine-uploader'),
            request: {
                endpoint: 'https://onevietnam.blob.core.windows.net/toanle'
            },
            signature: {
                endpoint: '/signature'
            },
            uploadSuccess: {
                endpoint: '/success'
            },
            retry: {
               enableAuto: true
            },
            deleteFile: {
                enabled: true
            }
        });
                                </script>*@
                            </div>

                            <div class="field">

                                <div class="ui fluid multiple search selection dropdown">
                                    <input name="tags" id="tags" type="hidden" value="">
                                    <input class="search" autocomplete="off" tabindex="0"><span class="sizer"></span><div class="default text">Tag liên quan</div>
                                    <div class="menu transition hidden" tabindex="-1">

                                        @{
                                            if (tagList != null)
                                            {
                                                foreach (Tag tag in tagList)
                                                {
                                                    <div class="item" data-value="@tag.TagValue">@tag.TagText</div>
                                                }
                                            }
                                        }

                                    </div>
                                </div>

                            </div>





                        </div>
                        <div class="field">
                            <label>Mô tả </label>
                            <textarea rows="4" tabindex="4" id="Description" name="Description" value=""></textarea>

                        </div>

                        <div class="field">
                            <input id="search-location" type="text" placeholder="Tìm kiếm địa điểm...">
                        </div>

                        <div class="field">
                            <input id="btnCreate" type="submit" tabindex="6" value="Post" class="ui primary button"/>

                        </div>
                    </div>                    
                                                }

            </div>
            <div class="grid-sizer"></div>
            <div class="gutter-sizer"></div>
          @Html.Partial("_PostRow", (ViewBag.Posts as List<PostViewModel>))
            <div class="container infinite-scroll" id="gohere"></div>





        </div>
    </div>



    <div class="four wide column">
        <a href="javascript:" id="return-to-top"><i class="chevron up icon"></i></a>
        
        <div class="ui card">
            <div class="content">
                <div class="header">Admin post</div>
            </div>
            <div class="content">
                <h4 class="ui sub header">Activity</h4>
                <div class="ui small feed">
                    <div class="event">
                        <div class="content">
                            <div class="summary">
                                <a>Elliot Fu</a> added <a>Jenny Hess</a> to the project
                            </div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="content">
                            <div class="summary">
                                <a>Stevie Feliciano</a> was added as an <a>Administrator</a>
                            </div>
                        </div>
                    </div>
                    <div class="event">
                        <div class="content">
                            <div class="summary">
                                <a>Helen Troy</a> added two pictures
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="extra content">
                <button class="ui button">Join Project</button>
                @*<input type="button" id="btnShow" value="Show detail" onclick="" />
                <script>
        $("#btnShow")
            .click(function() {
                var param = {
                    postId: '5789f131465f912730e239b8'
                };
                $.ajax({
                    type: 'GET',
                    url: '_ShowPostDetail',
                    data: param,
                    success: function (partialResult) {
                        $("#ShowPostDetail").html("");
                        $("#ShowPostDetail").html(partialResult);

                    }

                });

                $("#ShowPostDetail").modal('show');
            });
                </script>
                <div id="ShowPostDetail" class="ui modal">

                </div>*@
            </div>
        </div>
    </div>
    </div>

@section scripts{
    <script src="~/Scripts/infiniteScroll.js"></script>
    <script type="text/javascript">
        $(function () {
            $("div#loading").hide();
        });
        var moreRowsUrl = '/Post/NewFeeds';
        $(window).scroll(scrollHandler);
        @*var hasReachedEndOfInfiniteScroll = @ViewBag.IsEndOfRecords.ToString().ToLower();*@
    </script>
}

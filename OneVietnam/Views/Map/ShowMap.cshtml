@model IEnumerable<OneVietnam.Models.AddLocationViewModel>

@{
    ViewBag.Title = "ShowMap";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script>
    var isAuthenticated;
</script>
@using Microsoft.AspNet.Identity
@if (Request.IsAuthenticated)
{
    <script>
        isAuthenticated = true;
    </script>
}
else
{
    <script>
        isAuthenticated = false;
    </script>
}

<head>
    <meta charset="utf-8" />
    <title>Bản đồ tìm kiếm</title>

    @*<link href="~/Content/Map/infoWindow.css" rel="stylesheet">
        <link href="~/Content/Map/map.css" rel="stylesheet">
        <link href="~/Content/Map/searchbox.css" rel="stylesheet">
        <link href="~/Content/Map/mappagecustom.css" rel="stylesheet">*@
    <script type="text/javascript">

        var array = [];
        var males = [];
        var females = [];
        var LGBT = [];
        var PostArray = [];
        var postType0 = [];
        var postType1 = [];
        var postType2 = [];

        @foreach (var item in Model) {
        <text>
        array.push({x :@item.x ,y : @item.y, gender:@item.gender, address: '@item.address', userID :'@item.userid'});
        if(@item.gender == 0){
            males.push({x :@item.x ,y : @item.y, address: '@item.address', userID :'@item.userid'});
        }else
            if(@item.gender == 1){
                females.push({x :@item.x ,y : @item.y, address: '@item.address', userID :'@item.userid'});
            }else
                if(@item.gender == 2){
                    LGBT.push({x :@item.x ,y : @item.y, address: '@item.address', userID :'@item.userid'});
                }
        @try {
            if (@item.Posts != null) {
                if (@item.Posts.Count > 0) {
                    foreach (var post in @item.Posts) {

                        if(@post.PostType.CompareTo(0) == 0)
                        {
                            @:postType0.push({postID: '@post.Id',username: '@post.Username',postType : @post.PostType, deletedFlag : '@post.DeletedFlag', status : '@post.Status', x: @post.PostLocation.XCoordinate, y: @post.PostLocation.YCoordinate, address : '@post.PostLocation.Address'});
                                                        }
                        else
                        if (@post.PostType.CompareTo(1) == 0)
                        {
                              @:postType1.push({postID: '@post.Id',username: '@post.Username',postType : @post.PostType, deletedFlag : '@post.DeletedFlag', status : '@post.Status', x: @post.PostLocation.XCoordinate, y: @post.PostLocation.YCoordinate, address : '@post.PostLocation.Address'});
                                                }
                @:PostArray.push({postID: '@post.Id',username: '@post.Username',postType : @post.PostType, deletedFlag : '@post.DeletedFlag', status : '@post.Status', x: @post.PostLocation.XCoordinate, y: @post.PostLocation.YCoordinate, address : '@post.PostLocation.Address'});
                                                              }
                    }
                }
            }
            catch (ArgumentException e) {
                // throw new YourCustomException("Put your error message here.", e);
            }

        </text>
        }

    </script>
    <script>
$(document).ready(function(){
    $("#button").click(function(){
        $("#baidang").animate({left: '250px'});
    });
});
    </script>
</head>

<div class="ui stackable container" style="width:100%;height:100%;position:relative">
    <div id="map_canvas" style="width:100%;height:100%"></div>
    <input id="pac-input" class="controls" type="text" placeholder="Tìm kiếm địa điểm" style=" position: absolute; left: 40% !important; top: 2% !important;">
    @*<button type="button" onclick="showCurrentLocation()"><img src="~/images/currentLocationButton.png" class="img-rounded" alt="Cinque Terre" style="z-index: 0; width:30px;height:30px"></button>*@
    @*background-image: url('../Images/currentLocationButton.png');*@
    <p id="cal"></p>
    <button class="ui purple button" type="submit" onclick="showCurrentLocation()" style=" position: absolute; left: 45% ; bottom: 55px ">Địa điểm của tôi</button>
    <div class="ui vertical buttons" style="position: absolute; right: 10px; top: 30%;">
        <button type="submit" onclick="showAccommodation()" class="ui red  button">Nhà ở</button>
        <button type="submit" onclick="showJobOffer()" class="ui blue  button">Việc làm</button>
        <button type="submit" onclick="showFurnitureOffer()" class="ui blue  button">Cho đồ</button>
        <button type="submit" onclick="showHandGoodsOffer()" class="ui green  button">Xách tay</button>
        <button type="submit" onclick="showTradeOffer()" class="ui olive  button">Mua bán</button>
        <button type="submit" onclick="showSOS()" class="ui purple  button">Khẩn cấp</button>

    </div>
    <div class="ui buttons" style=" position: absolute; left: 70% ; top: 70px;">
        <button type="submit" onclick="showMales()" class="ui orange button">Nam</button>
        <button type="submit" onclick="showFemales()" class="ui olive button">Nữ</button>
        <button type="submit" onclick="showLGBT()" class="ui pink button">LGBT</button>
        <button type="submit" onclick="showUsers()" class="ui yellow button">Tất cả người dùng</button>
    </div>
    <div id="postMenu" style="height:100%;width:300px;display:none;position:absolute;left:0px;top:0px;color:chartreuse;background-color:white"></div>
    <div id="button" class="ui blue big launch left attached fixed button" style="position: absolute; left: 0px; top: 300px;">
        <i class="content icon"></i>
        <span class="text" id="baidang" style="display:none">Bài đăng</span>
    </div>
</div>
@*<script type="text/javascript" src="~/Scripts/OverlappingMarkerSpiderfier.js"></script>*@

<script defer src="~/Scripts/OverlappingMarkerSpiderfier.js"></script>

